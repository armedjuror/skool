{% extends 'main/layout.html' %}
{% load static %}

{% block page_title %}Settings{% endblock %}

{% block extra_css %}
    <style>
        /* Settings Page Styles */

        .settings-page {
            padding: 0;
        }

        /* Settings Tabs */
        .settings-tabs {
            border-bottom: 2px solid var(--gray-200);
            background: linear-gradient(to bottom, var(--gray-50), transparent);
        }

        .settings-tabs .nav-link {
            color: var(--gray-600);
            border: none;
            border-bottom: 3px solid transparent;
            padding: 1rem 1.5rem;
            font-weight: 500;
            transition: all 0.3s ease;
            position: relative;
        }

        .settings-tabs .nav-link:hover {
            color: var(--accent-gold);
            background-color: var(--gray-50);
        }

        .settings-tabs .nav-link.active {
            color: var(--accent-gold);
            background-color: transparent;
            border-bottom-color: var(--accent-gold);
        }

        .settings-tabs .nav-link i {
            font-size: 1.1rem;
        }

        /* Sticky Form */
        .sticky-form {
            position: sticky;
            top: 20px;
            background: var(--gray-50);
            padding: 1.5rem;
            border-radius: 8px;
            border: 1px solid var(--gray-200);
        }

        .sticky-form h5 {
            color: var(--primary-main);
            margin-bottom: 1rem;
            font-size: 1.1rem;
            font-weight: 600;
        }

        /* Active Academic Year */
        .active-year {
            background: linear-gradient(135deg,
                rgba(201, 169, 97, 0.1),
                rgba(201, 169, 97, 0.05)
            );
            border-left: 4px solid var(--accent-gold);
        }

        /* System Cards */
        .system-card {
            border: 1px solid var(--gray-200);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }

        .system-card:hover {
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .system-card .card-header {
            background: linear-gradient(135deg, var(--primary-dark), var(--primary-main));
            color: white;
            border-bottom: 2px solid var(--accent-gold);
            padding: 1rem;
        }

        .system-card .card-header h5 {
            margin: 0;
            font-size: 1rem;
            font-weight: 600;
        }

        .system-card .card-body h6 {
            color: var(--primary-main);
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            margin-top: 1rem;
        }

        .system-card .card-body h6:first-child {
            margin-top: 0;
        }

        /* List Groups */
        .list-group-item {
            border-left: 3px solid transparent;
            transition: all 0.2s ease;
            background: rgba(197, 166, 96, 0.1) !important;
            margin: 5px 0;
            border-radius: 7px;
        }

        .list-group-item:hover {
            background-color: var(--gray-50);
            border-left-color: var(--accent-emerald);
        }

        .list-group-sm .list-group-item {
            padding: 0.5rem 0.75rem;
            font-size: 0.9rem;
        }

        /* Button Actions */
        .btn-action {
            padding: 0.25rem 0.5rem;
            font-size: 0.85rem;
        }

        /* Audit Logs Table */
        #auditLogsContainer table {
            font-size: 0.85rem;
        }

        #auditLogsContainer table th {
            background-color: var(--gray-100);
            color: var(--primary-main);
            font-weight: 600;
            border-bottom: 2px solid var(--accent-gold);
            white-space: nowrap;
        }

        #auditLogsContainer table tbody tr:hover {
            background-color: var(--gray-50);
        }

        /* Form Controls in Cards */
        .system-card .form-control,
        .system-card .form-select {
            border-color: var(--gray-300);
            font-size: 0.9rem;
        }

        .system-card .form-control:focus,
        .system-card .form-select:focus {
            border-color: var(--accent-gold);
            box-shadow: 0 0 0 0.2rem rgba(201, 169, 97, 0.25);
        }

        /* Badge Overrides for Settings */
        .badge {
            font-weight: 500;
            padding: 0.35rem 0.65rem;
        }

        .badge.bg-success {
            background-color: var(--success) !important;
        }

        .badge.bg-danger {
            background-color: var(--danger) !important;
        }

        .badge.bg-info {
            background-color: var(--info) !important;
        }

        .badge.bg-warning {
            background-color: var(--warning) !important;
            color: white;
        }

        .badge.bg-primary {
            background-color: var(--accent-emerald) !important;
        }

        .badge.bg-secondary {
            background-color: var(--gray-600) !important;
        }

        /* Empty State */
        .empty-state {
            padding: 3rem 1rem;
        }

        .empty-state i {
            opacity: 0.5;
        }

        .empty-state p {
            font-size: 0.95rem;
            margin-bottom: 0;
        }

        /* Responsive Design */

        /* Tablet (768px and below) */
        @media (max-width: 768px) {
            .settings-tabs .nav-link {
                padding: 0.75rem 1rem;
                font-size: 0.9rem;
            }

            .settings-tabs .tab-text {
                display: none;
            }

            .settings-tabs .nav-link i {
                margin-right: 0 !important;
                font-size: 1.2rem;
            }

            .sticky-form {
                position: static;
                margin-top: 1.5rem;
            }

            .btn-group {
                flex-direction: column;
            }

            .btn-group .btn {
                border-radius: 0.25rem !important;
                margin-bottom: 0.25rem;
            }
        }

        /* Mobile (576px and below) */
        @media (max-width: 576px) {
            .settings-page {
                padding: 0;
            }

            .settings-tabs {
                overflow-x: auto;
                overflow-y: hidden;
                flex-wrap: nowrap;
                -webkit-overflow-scrolling: touch;
                scrollbar-width: none; /* Firefox */
            }

            .settings-tabs::-webkit-scrollbar {
                display: none; /* Chrome, Safari */
            }

            .settings-tabs .nav-item {
                flex-shrink: 0;
            }

            .settings-tabs .nav-link {
                padding: 0.75rem;
                min-width: 60px;
                text-align: center;
            }

            .sticky-form {
                padding: 1rem;
                border-radius: 6px;
            }

            .sticky-form h5 {
                font-size: 1rem;
            }

            .list-group-item {
                padding: 0.75rem;
            }

            .list-group-item h6 {
                font-size: 0.95rem;
            }

            .list-group-item small {
                font-size: 0.8rem;
            }

            .btn-action {
                padding: 0.35rem 0.6rem;
            }

            .system-card .card-header h5 {
                font-size: 0.9rem;
            }

            .system-card .card-body h6 {
                font-size: 0.85rem;
            }

            /* Stack filter columns vertically */
            #auditLogsContainer .row > div {
                margin-bottom: 0.5rem;
            }

            /* Make table scrollable */
            #auditLogsContainer {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }

            #auditLogsContainer table {
                font-size: 0.75rem;
                min-width: 600px;
            }

            /* Adjust form controls */
            .form-control-sm,
            .form-select-sm {
                font-size: 0.85rem;
                padding: 0.375rem 0.5rem;
            }
        }

        /* Extra Small Devices (400px and below) */
        @media (max-width: 400px) {
            .card-body {
                padding: 1rem;
            }

            .list-group-item {
                padding: 0.5rem;
            }

            .btn-group-sm .btn,
            .btn-sm {
                font-size: 0.75rem;
                padding: 0.25rem 0.5rem;
            }
        }

        /* Print Styles */
        @media print {
            .settings-tabs,
            .sticky-form,
            .btn,
            .btn-group {
                display: none !important;
            }

            .tab-content {
                display: block !important;
            }

            .tab-pane {
                display: block !important;
                opacity: 1 !important;
            }
        }

        /* Dark Mode Support (Optional - if implementing) */
        @media (prefers-color-scheme: dark) {
            .settings-tabs {
                background: linear-gradient(to bottom, rgba(255, 255, 255, 0.05), transparent);
                border-bottom-color: rgba(255, 255, 255, 0.1);
            }

            .sticky-form {
                background: rgba(255, 255, 255, 0.05);
                border-color: rgba(255, 255, 255, 0.1);
            }

            .system-card {
                border-color: rgba(255, 255, 255, 0.1);
            }

            .list-group-item {
                background-color: transparent;
                border-color: rgba(255, 255, 255, 0.1);
            }

            .list-group-item:hover {
                background-color: rgba(255, 255, 255, 0.05);
            }
        }

        /* Accessibility Improvements */
        .settings-tabs .nav-link:focus {
            outline: 2px solid var(--accent-gold);
            outline-offset: -2px;
        }

        .btn:focus,
        .form-control:focus,
        .form-select:focus {
            outline: 2px solid var(--accent-gold);
            outline-offset: 2px;
        }

        /* Animation for Tab Content */
        .tab-pane {
            animation: fadeIn 0.3s ease-in;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Loading State */
        .settings-page.loading {
            opacity: 0.6;
            pointer-events: none;
        }

        /* Success/Error States */
        .form-control.is-valid {
            border-color: var(--success);
        }

        .form-control.is-invalid {
            border-color: var(--danger);
        }

        /* Multi-select Styling */
        select[multiple] {
            min-height: 120px;
        }

        select[multiple]:focus {
            border-color: var(--accent-gold);
            box-shadow: 0 0 0 0.2rem rgba(201, 169, 97, 0.25);
        }

        /* File Input Styling */
        input[type="file"] {
            font-size: 0.9rem;
        }

        input[type="file"]::-webkit-file-upload-button {
            background: var(--primary-main);
            color: white;
            border: none;
            padding: 0.375rem 0.75rem;
            border-radius: 0.25rem;
            cursor: pointer;
            margin-right: 0.5rem;
            transition: background 0.3s ease;
        }

        input[type="file"]::-webkit-file-upload-button:hover {
            background: var(--primary-dark);
        }

        /* Checkbox and Radio Styling */
        .form-check-input:checked {
            background-color: var(--accent-emerald);
            border-color: var(--accent-emerald);
        }

        .form-check-input:focus {
            border-color: var(--accent-gold);
            box-shadow: 0 0 0 0.2rem rgba(201, 169, 97, 0.25);
        }
    </style>
{% endblock %}

{% block content %}
<div class="settings-page">
    <!-- Page Header -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h2 class="mb-1">System Settings</h2>
            <p class="text-muted mb-0">Manage academic years, branches, users, and system configurations</p>
        </div>
    </div>

    <!-- Tabbed Interface -->
    <div class="card">
        <div class="card-header p-0 border-0">
            <ul class="nav nav-tabs settings-tabs" id="settingsTabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="academic-tab" data-bs-toggle="tab" data-bs-target="#academic"
                            type="button" role="tab" aria-controls="academic" aria-selected="true">
                        <i class="fas fa-graduation-cap me-2"></i>
                        <span class="tab-text">Academic Setup</span>
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="branches-tab" data-bs-toggle="tab" data-bs-target="#branches"
                            type="button" role="tab" aria-controls="branches" aria-selected="false">
                        <i class="fas fa-building me-2"></i>
                        <span class="tab-text">Branches</span>
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="classes-tab" data-bs-toggle="tab" data-bs-target="#classes"
                            type="button" role="tab" aria-controls="classes" aria-selected="false">
                        <i class="fas fa-chalkboard me-2"></i>
                        <span class="tab-text">Classes & Divisions</span>
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="users-tab" data-bs-toggle="tab" data-bs-target="#users"
                            type="button" role="tab" aria-controls="users" aria-selected="false">
                        <i class="fas fa-users me-2"></i>
                        <span class="tab-text">Users</span>
                    </button>
                </li>
{#                <li class="nav-item" role="presentation">#}
{#                    <button class="nav-link" id="system-tab" data-bs-toggle="tab" data-bs-target="#system"#}
{#                            type="button" role="tab" aria-controls="system" aria-selected="false">#}
{#                        <i class="fas fa-cog me-2"></i>#}
{#                        <span class="tab-text">System</span>#}
{#                    </button>#}
{#                </li>#}
            </ul>
        </div>

        <div class="card-body">
            <div class="tab-content" id="settingsTabContent">

                <!-- Tab 1: Academic Setup -->
                <div class="tab-pane fade show active" id="academic" role="tabpanel" aria-labelledby="academic-tab">
                    <div class="row">
                        <div class="col-lg-8">
                            <h5 class="mb-3">Academic Years</h5>
                            <div id="academicYearsContainer">
                                <!-- Academic years will be loaded here -->
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="sticky-form">
                                <h5 class="mb-3">Add Academic Year</h5>
                                <form id="academicYearForm">
                                    <div class="mb-3">
                                        <label for="academicYearName" class="form-label">Year Name</label>
                                        <input type="text" class="form-control" id="academicYearName"
                                               placeholder="e.g., 2024-2025" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="academicStartDate" class="form-label">Start Date</label>
                                        <input type="date" class="form-control" id="academicStartDate" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="academicEndDate" class="form-label">End Date</label>
                                        <input type="date" class="form-control" id="academicEndDate" required>
                                    </div>
                                    <div class="form-check mb-3">
                                        <input type="checkbox" class="form-check-input" id="academicIsActive">
                                        <label class="form-check-label" for="academicIsActive">
                                            Set as Active Year
                                        </label>
                                    </div>
                                    <button type="submit" class="btn btn-primary w-100">
                                        <i class="fas fa-plus me-2"></i>Add Academic Year
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab 2: Branch Management -->
                <div class="tab-pane fade" id="branches" role="tabpanel" aria-labelledby="branches-tab">
                    <div class="row">
                        <div class="col-lg-8">
                            <h5 class="mb-3">Branches</h5>
                            <div id="branchesContainer">
                                <!-- Branches will be loaded here -->
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="sticky-form">
                                <h5 class="mb-3">Add Branch</h5>
                                <form id="branchForm">
                                    <div class="mb-3">
                                        <label for="branchName" class="form-label">Branch Name</label>
                                        <input type="text" class="form-control" id="branchName"
                                               placeholder="e.g., Main Branch" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="branchCode" class="form-label">Branch Code</label>
                                        <input type="text" class="form-control" id="branchCode"
                                               placeholder="e.g., MNBR" required maxlength="4">
                                    </div>
                                    <div class="mb-3">
                                        <label for="branchHeadTeacher" class="form-label">Head Teacher</label>
                                        <select class="form-select" id="branchHeadTeacher">
                                            <option value="">Select Head Teacher</option>
                                            <!-- Teachers will be loaded here -->
                                        </select>
                                    </div>
                                    <div class="mb-3">
                                        <label for="branchContact" class="form-label">Contact Number</label>
                                        <input type="tel" class="form-control" id="branchContact"
                                               placeholder="e.g., 12345678">
                                    </div>
                                    <div class="mb-3">
                                        <label for="branchEmail" class="form-label">Email</label>
                                        <input type="text" class="form-control" id="branchEmail"
                                               placeholder="mnbr@example.com">
                                    </div>
                                    <div class="mb-3">
                                        <label for="branchLocation" class="form-label">Location</label>
                                        <input type="text" class="form-control" id="branchLocation"
                                               placeholder="e.g., Downtown">
                                    </div>
                                    <button type="submit" class="btn btn-primary w-100">
                                        <i class="fas fa-plus me-2"></i>Add Branch
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab 3: Classes & Divisions -->
                <div class="tab-pane fade" id="classes" role="tabpanel" aria-labelledby="classes-tab">
                    <div class="row">
                        <div class="col-lg-6 mb-4">
                            <h5 class="mb-3">Classes</h5>
                            <div id="classesContainer">
                                <!-- Classes will be loaded here -->
                            </div>
                            <button class="btn btn-outline-primary btn-sm mt-3" id="addClassBtn">
                                <i class="fas fa-plus me-2"></i>Add Class
                            </button>
                        </div>
                        <div class="col-lg-6 mb-4">
                            <h5 class="mb-3">Divisions</h5>
                            <div id="divisionsContainer">
                                <!-- Divisions will be loaded here -->
                            </div>
                            <button class="btn btn-outline-primary btn-sm mt-3" id="addDivisionBtn">
                                <i class="fas fa-plus me-2"></i>Add Division
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Tab 4: User Management -->
                <div class="tab-pane fade" id="users" role="tabpanel" aria-labelledby="users-tab">
                    <div class="row">
                        <div class="col-lg-8">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <h5 class="mb-0">Users</h5>
                                <div class="filter-panel p-0 border-0 bg-transparent">
                                    <input type="text" class="form-control form-control-sm search-box"
                                           id="userSearch" placeholder="Search users...">
                                </div>
                            </div>
                            <div id="usersContainer">
                                <!-- Users will be loaded here -->
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="sticky-form">
                                <h5 class="mb-3">Add User</h5>
                                <form id="userForm">
                                    <div class="mb-3">
                                        <label for="userFirstName" class="form-label">First Name</label>
                                        <input type="text" class="form-control" id="userFirstName" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="userLastName" class="form-label">Last Name</label>
                                        <input type="text" class="form-control" id="userLastName" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="userEmail" class="form-label">Email</label>
                                        <input type="email" class="form-control" id="userEmail" required>
                                    </div>
                                    <div class="mb-3">
                                        <label for="userType" class="form-label">Role</label>
                                        <select class="form-select" id="userType" required>
                                            <option value="">Select Role</option>
                                            <option value="ADMIN">Administrator</option>
                                            <option value="CHIEF_HEAD_TEACHER">Chief Head Teacher</option>
                                            <option value="HEAD_TEACHER">Head Teacher</option>
                                            <option value="TEACHER">Teacher</option>
                                            <option value="ACCOUNTANT">Accountant</option>
                                            <option value="OFFICE_STAFF">Office Staff</option>
                                            <option value="STUDENT">Student</option>
                                            <option value="PARENT">Parent</option>
                                        </select>
                                    </div>
                                    <div class="mb-3">
                                        <label for="userPassword" class="form-label">Password</label>
                                        <input type="password" class="form-control" id="userPassword" required>
                                    </div>
                                    <button type="submit" class="btn btn-primary w-100">
                                        <i class="fas fa-user-plus me-2"></i>Add User
                                    </button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab 5: System -->
                <div class="tab-pane fade" id="system" role="tabpanel" aria-labelledby="system-tab">
                    <div class="row">
                        <div class="col-lg-6 mb-4">
                            <div class="card system-card">
                                <div class="card-header">
                                    <h5 class="mb-0"><i class="fas fa-database me-2"></i>Database Management</h5>
                                </div>
                                <div class="card-body">
                                    <h6>Backup Database</h6>
                                    <p class="text-muted small">Create a backup of the database</p>
                                    <button class="btn btn-outline-primary btn-sm mb-3" id="backupNowBtn">
                                        <i class="fas fa-download me-2"></i>Backup Now
                                    </button>

                                    <hr>

                                    <h6>Schedule Automatic Backups</h6>
                                    <form id="backupScheduleForm">
                                        <div class="mb-3">
                                            <label class="form-label">Frequency</label>
                                            <select class="form-select form-select-sm" id="backupFrequency">
                                                <option value="disabled">Disabled</option>
                                                <option value="daily">Daily</option>
                                                <option value="weekly">Weekly</option>
                                                <option value="monthly">Monthly</option>
                                            </select>
                                        </div>
                                        <div class="mb-3" id="backupTimeContainer" style="display: none;">
                                            <label class="form-label">Backup Time</label>
                                            <input type="time" class="form-control form-control-sm" id="backupTime">
                                        </div>
                                        <button type="submit" class="btn btn-primary btn-sm">
                                            <i class="fas fa-save me-2"></i>Save Schedule
                                        </button>
                                    </form>

                                    <hr>

                                    <h6>Restore Database</h6>
                                    <p class="text-muted small">Upload and restore from a backup file</p>
                                    <form id="restoreForm">
                                        <div class="mb-3">
                                            <input type="file" class="form-control form-control-sm"
                                                   id="restoreFile" accept=".sql,.backup">
                                        </div>
                                        <button type="submit" class="btn btn-danger btn-sm">
                                            <i class="fas fa-upload me-2"></i>Restore Database
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-6 mb-4">
                            <div class="card system-card">
                                <div class="card-header">
                                    <h5 class="mb-0"><i class="fas fa-shield-alt me-2"></i>Security Settings</h5>
                                </div>
                                <div class="card-body">
                                    <h6>Password Policy</h6>
                                    <form id="passwordPolicyForm">
                                        <div class="mb-3">
                                            <label class="form-label">Minimum Length</label>
                                            <input type="number" class="form-control form-control-sm"
                                                   id="minPasswordLength" min="6" max="32" value="8">
                                        </div>
                                        <div class="form-check mb-2">
                                            <input type="checkbox" class="form-check-input"
                                                   id="requireUppercase" checked>
                                            <label class="form-check-label" for="requireUppercase">
                                                Require uppercase letters
                                            </label>
                                        </div>
                                        <div class="form-check mb-2">
                                            <input type="checkbox" class="form-check-input"
                                                   id="requireLowercase" checked>
                                            <label class="form-check-label" for="requireLowercase">
                                                Require lowercase letters
                                            </label>
                                        </div>
                                        <div class="form-check mb-2">
                                            <input type="checkbox" class="form-check-input"
                                                   id="requireNumbers" checked>
                                            <label class="form-check-label" for="requireNumbers">
                                                Require numbers
                                            </label>
                                        </div>
                                        <div class="form-check mb-3">
                                            <input type="checkbox" class="form-check-input"
                                                   id="requireSpecialChars">
                                            <label class="form-check-label" for="requireSpecialChars">
                                                Require special characters
                                            </label>
                                        </div>
                                        <button type="submit" class="btn btn-primary btn-sm">
                                            <i class="fas fa-save me-2"></i>Save Policy
                                        </button>
                                    </form>

                                    <hr>

                                    <h6>Session Timeout</h6>
                                    <form id="sessionTimeoutForm">
                                        <div class="mb-3">
                                            <label class="form-label">Timeout (minutes)</label>
                                            <input type="number" class="form-control form-control-sm"
                                                   id="sessionTimeout" min="5" max="1440" value="30">
                                            <small class="form-text text-muted">
                                                Users will be logged out after this period of inactivity
                                            </small>
                                        </div>
                                        <button type="submit" class="btn btn-primary btn-sm">
                                            <i class="fas fa-save me-2"></i>Save Timeout
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>

                        <div class="col-12">
                            <div class="card system-card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h5 class="mb-0"><i class="fas fa-history me-2"></i>Audit Logs</h5>
                                    <button class="btn btn-outline-primary btn-sm" id="refreshLogsBtn">
                                        <i class="fas fa-sync-alt me-2"></i>Refresh
                                    </button>
                                </div>
                                <div class="card-body">
                                    <div class="row mb-3">
                                        <div class="col-md-3">
                                            <label class="form-label small">User</label>
                                            <select class="form-select form-select-sm" id="logFilterUser">
                                                <option value="">All Users</option>
                                            </select>
                                        </div>
                                        <div class="col-md-3">
                                            <label class="form-label small">Action Type</label>
                                            <select class="form-select form-select-sm" id="logFilterAction">
                                                <option value="">All Actions</option>
                                                <option value="create">Create</option>
                                                <option value="update">Update</option>
                                                <option value="delete">Delete</option>
                                                <option value="login">Login</option>
                                                <option value="logout">Logout</option>
                                            </select>
                                        </div>
                                        <div class="col-md-3">
                                            <label class="form-label small">From Date</label>
                                            <input type="date" class="form-control form-control-sm" id="logFilterFrom">
                                        </div>
                                        <div class="col-md-3">
                                            <label class="form-label small">To Date</label>
                                            <input type="date" class="form-control form-control-sm" id="logFilterTo">
                                        </div>
                                    </div>
                                    <div id="auditLogsContainer" class="table-responsive">
                                        <!-- Audit logs table will be loaded here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>

<!-- Edit Academic Year Modal -->
<div class="modal fade" id="editAcademicYearModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Edit Academic Year</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="editAcademicYearForm">
                    <input type="hidden" id="editAcademicYearId">
                    <div class="mb-3">
                        <label for="editAcademicYearName" class="form-label">Year Name</label>
                        <input type="text" class="form-control" id="editAcademicYearName" required>
                    </div>
                    <div class="mb-3">
                        <label for="editAcademicStartDate" class="form-label">Start Date</label>
                        <input type="date" class="form-control" id="editAcademicStartDate" required>
                    </div>
                    <div class="mb-3">
                        <label for="editAcademicEndDate" class="form-label">End Date</label>
                        <input type="date" class="form-control" id="editAcademicEndDate" required>
                    </div>
                    <div class="form-check mb-3">
                        <input type="checkbox" class="form-check-input" id="editAcademicIsActive">
                        <label class="form-check-label" for="editAcademicIsActive">
                            Set as Active Year
                        </label>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="saveAcademicYearBtn">
                    <i class="fas fa-save me-2"></i>Save Changes
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Edit Branch Modal -->
<div class="modal fade" id="editBranchModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Edit Branch</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="editBranchForm">
                    <input type="hidden" id="editBranchId">
                    <div class="mb-3">
                        <label for="editBranchName" class="form-label">Branch Name</label>
                        <input type="text" class="form-control" id="editBranchName" required>
                    </div>
                    <div class="mb-3">
                        <label for="editBranchHeadTeacher" class="form-label">Head Teacher</label>
                        <select class="form-select" id="editBranchHeadTeacher">
                            <option value="">Select Head Teacher</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="editBranchLocation" class="form-label">Location</label>
                        <input type="text" class="form-control" id="editBranchLocation">
                    </div>
                    <div class="mb-3">
                        <label for="editBranchContact" class="form-label">Contact Number</label>
                        <input type="tel" class="form-control" id="editBranchContact">
                    </div>
                    <div class="mb-3">
                        <label for="editBranchEmail" class="form-label">Email</label>
                        <input type="email" class="form-control" id="editBranchEmail">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="saveBranchBtn">
                    <i class="fas fa-save me-2"></i>Save Changes
                </button>
            </div>
        </div>
    </div>
</div>

{% endblock %}

{% block extra_js %}
    <script src="{% static 'js/settings.js' %}"></script>
{% endblock %}