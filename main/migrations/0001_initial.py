# Generated by Django 5.2.8 on 2026-01-01 18:49

import django.contrib.auth.models
import django.core.validators
import django.db.models.deletion
import django.utils.timezone
import uuid
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('auth', '0012_alter_user_first_name_max_length'),
    ]

    operations = [
        migrations.CreateModel(
            name='AcademicYear',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('name', models.CharField(help_text='e.g., 2024-2025', max_length=50)),
                ('start_date', models.DateField()),
                ('end_date', models.DateField()),
                ('is_active', models.BooleanField(default=False, help_text='Only one academic year can be active at a time per organization')),
            ],
            options={
                'db_table': 'academic_years',
                'ordering': ['-start_date'],
            },
        ),
        migrations.CreateModel(
            name='Class',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('name', models.CharField(help_text='e.g., Class I, Class II, etc.', max_length=50)),
                ('level', models.IntegerField(help_text='Arabic numeral: 1, 2,...., 11, 12')),
                ('display_order', models.IntegerField(default=0)),
                ('is_active', models.BooleanField(default=True)),
            ],
            options={
                'verbose_name_plural': 'Classes',
                'db_table': 'classes',
                'ordering': ['organization', 'display_order', 'name'],
            },
        ),
        migrations.CreateModel(
            name='User',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('password', models.CharField(max_length=128, verbose_name='password')),
                ('last_login', models.DateTimeField(blank=True, null=True, verbose_name='last login')),
                ('is_superuser', models.BooleanField(default=False, help_text='Designates that this user has all permissions without explicitly assigning them.', verbose_name='superuser status')),
                ('first_name', models.CharField(blank=True, max_length=150, verbose_name='first name')),
                ('last_name', models.CharField(blank=True, max_length=150, verbose_name='last name')),
                ('is_staff', models.BooleanField(default=False, help_text='Designates whether the user can log into this admin site.', verbose_name='staff status')),
                ('is_active', models.BooleanField(default=True, help_text='Designates whether this user should be treated as active. Unselect this instead of deleting accounts.', verbose_name='active')),
                ('date_joined', models.DateTimeField(default=django.utils.timezone.now, verbose_name='date joined')),
                ('email', models.EmailField(max_length=254, unique=True)),
                ('user_type', models.CharField(choices=[('ADMIN', 'Admin'), ('CHIEF_HEAD_TEACHER', 'Chief Head Teacher'), ('HEAD_TEACHER', 'Head Teacher'), ('TEACHER', 'Teacher'), ('ACCOUNTANT', 'Accountant'), ('OFFICE_STAFF', 'Office Staff'), ('STUDENT', 'Student'), ('PARENT', 'Parent')], max_length=20)),
                ('groups', models.ManyToManyField(blank=True, help_text='The groups this user belongs to.', related_name='main_user_set', related_query_name='main_user', to='auth.group', verbose_name='groups')),
                ('user_permissions', models.ManyToManyField(blank=True, help_text='Specific permissions for this user.', related_name='main_user_set', related_query_name='main_user', to='auth.permission', verbose_name='user permissions')),
            ],
            options={
                'db_table': 'users',
                'ordering': ['organization', 'user_type', 'email'],
            },
            managers=[
                ('objects', django.contrib.auth.models.UserManager()),
            ],
        ),
        migrations.CreateModel(
            name='Branch',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('name', models.CharField(max_length=200)),
                ('code', models.CharField(help_text='4-letter code used for admission numbers (e.g., WAKR)', max_length=10)),
                ('address', models.JSONField(blank=True, default=dict)),
                ('contact_person', models.CharField(blank=True, max_length=200, null=True)),
                ('phone', models.CharField(blank=True, max_length=20, null=True)),
                ('email', models.EmailField(blank=True, max_length=254, null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('head_teacher', models.ForeignKey(blank=True, limit_choices_to={'user_type__in': ['HEAD_TEACHER', 'CHIEF_HEAD_TEACHER']}, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='headed_branches', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name_plural': 'Branches',
                'db_table': 'branches',
                'ordering': ['organization', 'name'],
            },
        ),
        migrations.CreateModel(
            name='Organization',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('name', models.CharField(max_length=200)),
                ('code', models.CharField(help_text='Unique organization code (e.g., KIC)', max_length=10, unique=True)),
                ('logo', models.ImageField(blank=True, null=True, upload_to='organizations/logos/')),
                ('email', models.EmailField(blank=True, max_length=254, null=True)),
                ('phone', models.CharField(blank=True, max_length=20, null=True)),
                ('address', models.JSONField(blank=True, default=dict)),
                ('settings', models.JSONField(blank=True, default=dict, help_text='Organization-specific configuration')),
                ('is_active', models.BooleanField(default=True)),
            ],
            options={
                'db_table': 'organizations',
                'ordering': ['name'],
                'indexes': [models.Index(fields=['code'], name='organizatio_code_c5d604_idx'), models.Index(fields=['is_active'], name='organizatio_is_acti_bdc355_idx')],
            },
        ),
        migrations.CreateModel(
            name='FeeType',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('name', models.CharField(max_length=100)),
                ('description', models.TextField(blank=True, null=True)),
                ('category', models.CharField(choices=[('MONTHLY', 'Monthly Fee'), ('ADMISSION', 'Admission Fee'), ('EXAM', 'Exam Fee'), ('FESTIVAL', 'Festival Fee'), ('SPORTS', 'Sports Fee'), ('BOOKS', 'Books Fee'), ('UNIFORM', 'Uniform Fee'), ('TRANSPORT', 'Transport Fee'), ('OTHER', 'Other')], max_length=20)),
                ('charge_trigger', models.CharField(choices=[('ON_ADMISSION', 'On Student Admission'), ('ON_ENROLLMENT', 'On Academic Year Enrollment'), ('MONTHLY', 'Monthly Recurring'), ('ANNUAL', 'Once Per Year'), ('MANUAL', 'Manual Entry Only')], default='MANUAL', help_text='When to automatically create due records', max_length=20)),
                ('charge_month', models.IntegerField(blank=True, help_text='Which month to charge (1-12) for annual fees', null=True, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(12)])),
                ('is_recurring', models.BooleanField(default=False, help_text='Does this fee recur monthly?')),
                ('is_active', models.BooleanField(default=True)),
                ('organization', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='fee_types', to='main.organization')),
            ],
            options={
                'db_table': 'fee_types',
                'ordering': ['organization', 'category', 'name'],
            },
        ),
        migrations.CreateModel(
            name='FeeStructure',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('amount', models.DecimalField(decimal_places=2, max_digits=10, validators=[django.core.validators.MinValueValidator(0)])),
                ('applicable_to', models.CharField(choices=[('ALL', 'All Students'), ('PERMANENT', 'Permanent Students Only'), ('TEMPORARY', 'Temporary Students Only')], default='ALL', max_length=20)),
                ('effective_from', models.DateField()),
                ('effective_to', models.DateField()),
                ('auto_create_due', models.BooleanField(default=True, help_text='Automatically create due records for this fee')),
                ('due_days_after_trigger', models.IntegerField(default=0, help_text='Days after trigger event before fee is due', validators=[django.core.validators.MinValueValidator(0)])),
                ('is_active', models.BooleanField(default=True)),
                ('academic_year', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='fee_structures', to='main.academicyear')),
                ('branch', models.ForeignKey(blank=True, help_text='Null = applies to all branches', null=True, on_delete=django.db.models.deletion.CASCADE, related_name='fee_structures', to='main.branch')),
                ('class_level', models.ForeignKey(blank=True, help_text='Null = applies to all classes', null=True, on_delete=django.db.models.deletion.CASCADE, related_name='fee_structures', to='main.class')),
                ('fee_type', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='structures', to='main.feetype')),
                ('organization', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='fee_structures', to='main.organization')),
            ],
            options={
                'db_table': 'fee_structures',
                'ordering': ['organization', 'academic_year', 'branch', 'class_level'],
            },
        ),
        migrations.CreateModel(
            name='EmailNotification',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('recipient_email', models.EmailField(max_length=254)),
                ('subject', models.CharField(max_length=200)),
                ('body', models.TextField()),
                ('template_name', models.CharField(blank=True, max_length=100, null=True)),
                ('context_data', models.JSONField(blank=True, default=dict, help_text='Template context variables')),
                ('status', models.CharField(choices=[('PENDING', 'Pending'), ('SENT', 'Sent'), ('FAILED', 'Failed')], default='PENDING', max_length=20)),
                ('sent_at', models.DateTimeField(blank=True, null=True)),
                ('error_message', models.TextField(blank=True, null=True)),
                ('organization', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='email_notifications', to='main.organization')),
            ],
            options={
                'db_table': 'email_notifications',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='DocumentUpload',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('entity_type', models.CharField(help_text='Model name this document belongs to', max_length=100)),
                ('entity_id', models.UUIDField()),
                ('file', models.FileField(upload_to='documents/%Y/%m/')),
                ('file_name', models.CharField(max_length=255)),
                ('file_type', models.CharField(max_length=50)),
                ('file_size', models.IntegerField(help_text='Size in bytes')),
                ('description', models.TextField(blank=True, null=True)),
                ('uploaded_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='uploaded_documents', to=settings.AUTH_USER_MODEL)),
                ('organization', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='documents', to='main.organization')),
            ],
            options={
                'db_table': 'document_uploads',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Division',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('name', models.CharField(help_text='e.g., A, B, C, ..., J', max_length=10)),
                ('is_active', models.BooleanField(default=True)),
                ('organization', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='divisions', to='main.organization')),
            ],
            options={
                'db_table': 'divisions',
                'ordering': ['organization', 'name'],
            },
        ),
        migrations.AddField(
            model_name='class',
            name='organization',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='classes', to='main.organization'),
        ),
        migrations.AddField(
            model_name='branch',
            name='organization',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='branches', to='main.organization'),
        ),
        migrations.CreateModel(
            name='AuditLog',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('entity_type', models.CharField(help_text='Model name (e.g., Student, FeeCollection)', max_length=100)),
                ('entity_id', models.UUIDField()),
                ('action', models.CharField(choices=[('CREATE', 'Created'), ('UPDATE', 'Updated'), ('DELETE', 'Deleted')], max_length=10)),
                ('old_values', models.JSONField(blank=True, null=True)),
                ('new_values', models.JSONField(blank=True, null=True)),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True)),
                ('user_agent', models.TextField(blank=True, null=True)),
                ('timestamp', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='audit_logs', to=settings.AUTH_USER_MODEL)),
                ('organization', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='audit_logs', to='main.organization')),
            ],
            options={
                'db_table': 'audit_logs',
                'ordering': ['-timestamp'],
            },
        ),
        migrations.CreateModel(
            name='AttendanceCalendar',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('date', models.DateField()),
                ('is_working_day', models.BooleanField(default=True)),
                ('holiday_reason', models.CharField(blank=True, help_text='Reason if not a working day', max_length=200, null=True)),
                ('academic_year', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='attendance_calendars', to='main.academicyear')),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_calendars', to=settings.AUTH_USER_MODEL)),
                ('branch', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='attendance_calendars', to='main.branch')),
                ('organization', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='attendance_calendars', to='main.organization')),
            ],
            options={
                'db_table': 'attendance_calendars',
                'ordering': ['branch', 'date'],
            },
        ),
        migrations.AddField(
            model_name='academicyear',
            name='organization',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='academic_years', to='main.organization'),
        ),
        migrations.AddField(
            model_name='user',
            name='organization',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='users', to='main.organization'),
        ),
        migrations.CreateModel(
            name='StaffAttendance',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('date', models.DateField()),
                ('status', models.CharField(choices=[('PRESENT', 'Present'), ('ABSENT', 'Absent'), ('LEAVE', 'On Leave'), ('LATE', 'Late')], max_length=10)),
                ('remarks', models.TextField(blank=True, null=True)),
                ('marked_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='marked_staff_attendance', to=settings.AUTH_USER_MODEL)),
                ('organization', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='staff_attendances', to='main.organization')),
                ('staff', models.ForeignKey(limit_choices_to={'user_type__in': ['ADMIN', 'CHIEF_HEAD_TEACHER', 'HEAD_TEACHER', 'TEACHER', 'ACCOUNTANT', 'OFFICE_STAFF']}, on_delete=django.db.models.deletion.CASCADE, related_name='attendance_records', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'staff_attendances',
                'ordering': ['-date', 'staff'],
            },
        ),
        migrations.CreateModel(
            name='StaffProfile',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('staff_number', models.CharField(max_length=20, unique=True)),
                ('category', models.CharField(choices=[('PERMANENT', 'Permanent'), ('TEMPORARY', 'Temporary')], max_length=20)),
                ('status', models.CharField(choices=[('ACTIVE', 'Active'), ('INACTIVE', 'Inactive')], default='INACTIVE', max_length=20)),
                ('monthly_salary', models.DecimalField(decimal_places=2, max_digits=10, validators=[django.core.validators.MinValueValidator(0)])),
                ('other_allowances', models.JSONField(blank=True, default=dict, help_text='Store transport, food, mobile allowances as JSON')),
                ('religious_academic_details', models.TextField(blank=True, null=True)),
                ('academic_details', models.TextField(blank=True, null=True)),
                ('previous_madrasa', models.CharField(blank=True, max_length=200, null=True)),
                ('msr_number', models.CharField(blank=True, max_length=50, null=True, verbose_name='MSR Number')),
                ('aadhar_number', models.CharField(blank=True, max_length=12, null=True)),
                ('notes', models.TextField(blank=True, null=True)),
                ('assigned_head_teacher', models.ForeignKey(blank=True, limit_choices_to={'user_type__in': ['HEAD_TEACHER', 'CHIEF_HEAD_TEACHER']}, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='supervised_staff', to=settings.AUTH_USER_MODEL)),
                ('branch', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='staff_members', to='main.branch')),
                ('user', models.OneToOneField(limit_choices_to={'user_type__in': ['ADMIN', 'CHIEF_HEAD_TEACHER', 'HEAD_TEACHER', 'TEACHER', 'ACCOUNTANT', 'OFFICE_STAFF']}, on_delete=django.db.models.deletion.CASCADE, related_name='staffprofile', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'staff_profiles',
            },
        ),
        migrations.CreateModel(
            name='StudentEnrollment',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('enrollment_status', models.CharField(choices=[('ENROLLED', 'Enrolled'), ('PROMOTED', 'Promoted'), ('DETAINED', 'Detained/Repeat'), ('TRANSFERRED', 'Transferred Out'), ('DROPPED', 'Dropped Out'), ('COMPLETED', 'Completed')], default='ENROLLED', max_length=20)),
                ('enrollment_date', models.DateField()),
                ('completion_date', models.DateField(blank=True, null=True)),
                ('attendance_percentage', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)])),
                ('final_result', models.CharField(blank=True, help_text='Pass/Fail or grade', max_length=20, null=True)),
                ('remarks', models.TextField(blank=True, null=True)),
                ('academic_year', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='student_enrollments', to='main.academicyear')),
                ('class_assigned', models.ForeignKey(help_text="Student's class for this academic year", on_delete=django.db.models.deletion.PROTECT, related_name='enrolled_students', to='main.class')),
                ('division_assigned', models.ForeignKey(help_text="Student's division for this academic year", on_delete=django.db.models.deletion.PROTECT, related_name='enrolled_students', to='main.division')),
                ('promoted_to', models.ForeignKey(blank=True, help_text="Link to next year's enrollment if promoted", null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='promoted_from', to='main.studentenrollment')),
            ],
            options={
                'db_table': 'student_enrollments',
                'ordering': ['-academic_year__start_date'],
            },
        ),
        migrations.CreateModel(
            name='StudentProfile',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('admission_number', models.CharField(max_length=20, unique=True)),
                ('category', models.CharField(choices=[('PERMANENT', 'Permanent'), ('TEMPORARY', 'Temporary')], max_length=20)),
                ('status', models.CharField(choices=[('ACTIVE', 'Active'), ('INACTIVE', 'Inactive'), ('GRADUATED', 'Graduated'), ('TRANSFERRED', 'Transferred'), ('DROPPED', 'Dropped Out')], default='INACTIVE', max_length=20)),
                ('has_siblings', models.BooleanField(default=False)),
                ('notes', models.TextField(blank=True, null=True)),
                ('activated_at', models.DateTimeField(blank=True, null=True)),
                ('activated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='activated_students', to=settings.AUTH_USER_MODEL)),
                ('branch', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='students', to='main.branch')),
                ('user', models.OneToOneField(limit_choices_to={'user_type': 'STUDENT'}, on_delete=django.db.models.deletion.CASCADE, related_name='studentprofile', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'student_profiles',
            },
        ),
        migrations.CreateModel(
            name='StudentFeeDue',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('month', models.IntegerField(blank=True, null=True, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(12)])),
                ('total_amount', models.DecimalField(decimal_places=2, max_digits=10, validators=[django.core.validators.MinValueValidator(0)])),
                ('paid_amount', models.DecimalField(decimal_places=2, default=0, max_digits=10, validators=[django.core.validators.MinValueValidator(0)])),
                ('due_amount', models.DecimalField(decimal_places=2, default=0, max_digits=10, validators=[django.core.validators.MinValueValidator(0)])),
                ('due_date', models.DateField(help_text='When this fee is due')),
                ('creation_source', models.CharField(choices=[('AUTO_ADMISSION', 'Auto-created on admission'), ('AUTO_ENROLLMENT', 'Auto-created on enrollment'), ('AUTO_MONTHLY', 'Auto-created monthly'), ('AUTO_ANNUAL', 'Auto-created annually'), ('MANUAL', 'Manually created'), ('ADMIN_OVERRIDE', 'Admin override')], default='MANUAL', max_length=20)),
                ('last_payment_date', models.DateField(blank=True, null=True)),
                ('academic_year', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='student_dues', to='main.academicyear')),
                ('fee_type', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='student_dues', to='main.feetype')),
                ('triggered_by_enrollment', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='fee_dues', to='main.studentenrollment')),
                ('student', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='fee_dues', to='main.studentprofile')),
            ],
            options={
                'db_table': 'student_fee_dues',
                'ordering': ['student', 'academic_year', 'fee_type', 'month'],
            },
        ),
        migrations.CreateModel(
            name='StudentFeeConfiguration',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('amount', models.DecimalField(decimal_places=2, max_digits=10, validators=[django.core.validators.MinValueValidator(0)])),
                ('override_reason', models.TextField(blank=True, help_text='Reason for custom fee amount (scholarship, sibling discount, etc.)', null=True)),
                ('academic_year', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='student_fee_configs', to='main.academicyear')),
                ('fee_type', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='student_configs', to='main.feetype')),
                ('updated_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='fee_config_updates', to=settings.AUTH_USER_MODEL)),
                ('student', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='fee_configurations', to='main.studentprofile')),
            ],
            options={
                'db_table': 'student_fee_configurations',
                'ordering': ['student', 'academic_year'],
            },
        ),
        migrations.CreateModel(
            name='StudentFamily',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('father_name', models.CharField(max_length=200)),
                ('parent_mobile', models.CharField(max_length=20)),
                ('father_whatsapp', models.CharField(blank=True, max_length=20, null=True)),
                ('email', models.EmailField(max_length=254)),
                ('mother_name', models.CharField(max_length=200)),
                ('siblings_details', models.TextField(blank=True, help_text='Information about siblings studying in the madrassa', null=True)),
                ('student', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='family', to='main.studentprofile')),
            ],
            options={
                'verbose_name_plural': 'Student Families',
                'db_table': 'student_families',
            },
        ),
        migrations.AddField(
            model_name='studentenrollment',
            name='student',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='enrollments', to='main.studentprofile'),
        ),
        migrations.CreateModel(
            name='StudentAttendance',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('date', models.DateField()),
                ('status', models.CharField(choices=[('PRESENT', 'Present'), ('ABSENT', 'Absent')], max_length=10)),
                ('remarks', models.TextField(blank=True, null=True)),
                ('marked_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='marked_student_attendance', to=settings.AUTH_USER_MODEL)),
                ('organization', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='student_attendances', to='main.organization')),
                ('enrollment', models.ForeignKey(help_text='Which enrollment/year this attendance is for', on_delete=django.db.models.deletion.CASCADE, related_name='attendance_records', to='main.studentenrollment')),
                ('student', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='attendance_records', to='main.studentprofile')),
            ],
            options={
                'db_table': 'student_attendances',
                'ordering': ['-date', 'student'],
            },
        ),
        migrations.CreateModel(
            name='StudentAcademicHistory',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('previous_class', models.CharField(blank=True, max_length=100, null=True)),
                ('previous_madrasa', models.CharField(blank=True, max_length=200, null=True)),
                ('tc_number', models.CharField(blank=True, max_length=50, null=True, verbose_name='Transfer Certificate Number')),
                ('completed_classes', models.CharField(blank=True, max_length=100, null=True)),
                ('year', models.IntegerField(blank=True, help_text='Year of completion', null=True)),
                ('notes', models.TextField(blank=True, null=True)),
                ('student', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='academic_history', to='main.studentprofile')),
            ],
            options={
                'verbose_name_plural': 'Student Academic Histories',
                'db_table': 'student_academic_histories',
                'ordering': ['-year'],
            },
        ),
        migrations.CreateModel(
            name='FeeCollection',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('receipt_number', models.CharField(max_length=50, unique=True)),
                ('collection_date', models.DateField()),
                ('payment_method', models.CharField(choices=[('CASH', 'Cash'), ('CARD', 'Card'), ('BANK_TRANSFER', 'Bank Transfer'), ('CHEQUE', 'Cheque'), ('OTHER', 'Other')], max_length=20)),
                ('total_amount', models.DecimalField(decimal_places=2, max_digits=10, validators=[django.core.validators.MinValueValidator(0)])),
                ('reference_number', models.CharField(blank=True, help_text='Cheque number, transaction ID, etc.', max_length=100, null=True)),
                ('remarks', models.TextField(blank=True, null=True)),
                ('status', models.CharField(choices=[('PENDING', 'Pending Approval'), ('APPROVED', 'Approved'), ('CANCELLED', 'Cancelled')], default='PENDING', max_length=20)),
                ('approved_at', models.DateTimeField(blank=True, null=True)),
                ('academic_year', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='fee_collections', to='main.academicyear')),
                ('approved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='approved_fees', to=settings.AUTH_USER_MODEL)),
                ('collected_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='collected_fees', to=settings.AUTH_USER_MODEL)),
                ('organization', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='fee_collections', to='main.organization')),
                ('enrollment', models.ForeignKey(blank=True, help_text='Link to specific enrollment period', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='fee_payments', to='main.studentenrollment')),
                ('student', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='fee_payments', to='main.studentprofile')),
            ],
            options={
                'db_table': 'fee_collections',
                'ordering': ['-collection_date', '-created_at'],
            },
        ),
        migrations.CreateModel(
            name='StudentRegistration',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('submission_date', models.DateTimeField(auto_now_add=True)),
                ('admission_type', models.CharField(choices=[('NEW', 'New Admission'), ('EXISTING_UPDATE', 'Existing Student Update')], max_length=20)),
                ('student_name', models.CharField(max_length=200)),
                ('gender', models.CharField(choices=[('Male', 'Male'), ('Female', 'Female')], max_length=10)),
                ('dob', models.DateField(verbose_name='Date of Birth')),
                ('study_type', models.CharField(choices=[('PERMANENT', 'Permanent'), ('TEMPORARY', 'Temporary')], max_length=20)),
                ('id_card_type', models.CharField(choices=[('QID', 'Qatar ID'), ('PASSPORT', 'Passport')], max_length=10)),
                ('id_card_number', models.CharField(max_length=50)),
                ('photo', models.ImageField(blank=True, null=True, upload_to='registrations/photos/%Y/%m/')),
                ('father_name', models.CharField(max_length=200)),
                ('parent_mobile', models.CharField(max_length=20)),
                ('father_whatsapp', models.CharField(blank=True, max_length=20, null=True)),
                ('email', models.EmailField(max_length=254)),
                ('mother_name', models.CharField(max_length=200)),
                ('siblings_details', models.TextField(blank=True, null=True)),
                ('qatar_address', models.JSONField(blank=True, default=dict)),
                ('india_address', models.JSONField(blank=True, default=dict)),
                ('completed_classes', models.CharField(blank=True, max_length=100, null=True)),
                ('previous_madrasa', models.CharField(blank=True, max_length=200, null=True)),
                ('tc_number', models.CharField(blank=True, max_length=50, null=True, verbose_name='Transfer Certificate Number')),
                ('aadhar_number', models.CharField(blank=True, max_length=12, null=True)),
                ('status', models.CharField(choices=[('PENDING', 'Pending Review'), ('APPROVED', 'Approved'), ('REJECTED', 'Rejected'), ('INFO_REQUESTED', 'Information Requested')], default='PENDING', max_length=20)),
                ('rejection_reason', models.TextField(blank=True, null=True)),
                ('info_request_message', models.TextField(blank=True, null=True)),
                ('reviewed_at', models.DateTimeField(blank=True, null=True)),
                ('class_to_admit', models.ForeignKey(help_text='Which class the parent wants to enroll in', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='registration_applications', to='main.class')),
                ('interested_branch', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='registration_applications', to='main.branch')),
                ('organization', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='student_registrations', to='main.organization')),
                ('reviewed_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='reviewed_registrations', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'student_registrations',
                'ordering': ['-submission_date'],
            },
        ),
        migrations.AddField(
            model_name='studentprofile',
            name='registration',
            field=models.OneToOneField(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='student', to='main.studentregistration'),
        ),
        migrations.CreateModel(
            name='SystemSetting',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('key', models.CharField(max_length=100)),
                ('value', models.JSONField()),
                ('description', models.TextField(blank=True, null=True)),
                ('category', models.CharField(blank=True, help_text='Group settings by category', max_length=50, null=True)),
                ('organization', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='system_settings', to='main.organization')),
            ],
            options={
                'db_table': 'system_settings',
                'ordering': ['category', 'key'],
            },
        ),
        migrations.CreateModel(
            name='TeacherAssignment',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('start_date', models.DateField(help_text='When this assignment started')),
                ('end_date', models.DateField(blank=True, help_text='When this assignment ended (null = ongoing)', null=True)),
                ('assignment_type', models.CharField(choices=[('PRIMARY', 'Primary Class Teacher'), ('SUBSTITUTE', 'Substitute Teacher'), ('ASSISTANT', 'Assistant Teacher'), ('TEMPORARY', 'Temporary Assignment')], default='PRIMARY', max_length=20)),
                ('change_reason', models.CharField(blank=True, choices=[('NEW_YEAR', 'New Academic Year'), ('LEAVE', 'Teacher on Leave'), ('TRANSFER', 'Teacher Transferred'), ('REPLACEMENT', 'Permanent Replacement'), ('RESIGNATION', 'Teacher Resigned'), ('PROMOTION', 'Teacher Promoted'), ('OTHER', 'Other')], max_length=20, null=True)),
                ('is_primary', models.BooleanField(default=True, help_text='Is this the primary teacher for this class?')),
                ('is_active', models.BooleanField(default=True)),
                ('remarks', models.TextField(blank=True, null=True)),
                ('academic_year', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='teacher_assignments', to='main.academicyear')),
                ('branch', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='teacher_assignments', to='main.branch')),
                ('class_assigned', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='teacher_assignments', to='main.class')),
                ('division_assigned', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='teacher_assignments', to='main.division')),
                ('replaced_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='replaces', to='main.teacherassignment')),
                ('teacher', models.ForeignKey(limit_choices_to={'user_type': 'TEACHER'}, on_delete=django.db.models.deletion.CASCADE, related_name='teaching_assignments', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'teacher_assignments',
                'ordering': ['-start_date'],
            },
        ),
        migrations.CreateModel(
            name='UserAddress',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('address_type', models.CharField(choices=[('QATAR', 'Qatar Address'), ('INDIA', 'India Address')], max_length=10)),
                ('qatar_place', models.CharField(blank=True, max_length=200, null=True)),
                ('qatar_landmark', models.CharField(blank=True, max_length=200, null=True)),
                ('qatar_building_no', models.CharField(blank=True, max_length=50, null=True)),
                ('qatar_street_no', models.CharField(blank=True, max_length=50, null=True)),
                ('qatar_zone_no', models.CharField(blank=True, max_length=50, null=True)),
                ('india_state', models.CharField(blank=True, max_length=100, null=True)),
                ('india_district', models.CharField(blank=True, max_length=100, null=True)),
                ('india_panchayath', models.CharField(blank=True, max_length=100, null=True)),
                ('india_place', models.CharField(blank=True, max_length=100, null=True)),
                ('india_house_name', models.CharField(blank=True, max_length=200, null=True)),
                ('india_contact', models.CharField(blank=True, max_length=20, null=True)),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='addresses', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name_plural': 'User Addresses',
                'db_table': 'user_addresses',
            },
        ),
        migrations.CreateModel(
            name='UserProfile',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('full_name', models.CharField(max_length=200)),
                ('gender', models.CharField(choices=[('Male', 'Male'), ('Female', 'Female')], max_length=10)),
                ('dob', models.DateField(verbose_name='Date of Birth')),
                ('age', models.IntegerField(blank=True, help_text='Auto-calculated from DOB', null=True)),
                ('id_card_type', models.CharField(choices=[('QID', 'Qatar ID'), ('PASSPORT', 'Passport')], max_length=10)),
                ('id_card_number', models.CharField(max_length=50)),
                ('mobile', models.CharField(max_length=20, validators=[django.core.validators.RegexValidator(message="Phone number must be entered in the format: '+999999999'", regex='^\\+?1?\\d{9,15}$')])),
                ('whatsapp', models.CharField(blank=True, max_length=20, null=True, validators=[django.core.validators.RegexValidator(message="Phone number must be entered in the format: '+999999999'", regex='^\\+?1?\\d{9,15}$')])),
                ('photo', models.ImageField(blank=True, null=True, upload_to='users/photos/%Y/%m/')),
                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='userprofile', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'db_table': 'user_profiles',
            },
        ),
        migrations.CreateModel(
            name='FeeCollectionItem',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('amount', models.DecimalField(decimal_places=2, max_digits=10, validators=[django.core.validators.MinValueValidator(0)])),
                ('month', models.IntegerField(blank=True, help_text='Month number (1-12) for monthly fees', null=True, validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(12)])),
                ('year', models.IntegerField(blank=True, null=True)),
                ('fee_collection', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='items', to='main.feecollection')),
                ('fee_type', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='collection_items', to='main.feetype')),
            ],
            options={
                'db_table': 'fee_collection_items',
                'ordering': ['fee_collection', 'fee_type'],
                'indexes': [models.Index(fields=['fee_collection'], name='fee_collect_fee_col_e00b22_idx'), models.Index(fields=['fee_type'], name='fee_collect_fee_typ_389b26_idx'), models.Index(fields=['month', 'year'], name='fee_collect_month_93db14_idx')],
            },
        ),
        migrations.CreateModel(
            name='LeaveRequest',
            fields=[
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('created_at', models.DateTimeField(auto_now_add=True, db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('leave_type', models.CharField(choices=[('SICK', 'Sick Leave'), ('CASUAL', 'Casual Leave'), ('EMERGENCY', 'Emergency Leave'), ('ANNUAL', 'Annual Leave'), ('OTHER', 'Other')], max_length=20)),
                ('from_date', models.DateField()),
                ('to_date', models.DateField()),
                ('reason', models.TextField()),
                ('status', models.CharField(choices=[('PENDING', 'Pending'), ('APPROVED', 'Approved'), ('REJECTED', 'Rejected')], default='PENDING', max_length=20)),
                ('review_remarks', models.TextField(blank=True, null=True)),
                ('reviewed_at', models.DateTimeField(blank=True, null=True)),
                ('requested_by', models.ForeignKey(limit_choices_to={'user_type__in': ['ADMIN', 'CHIEF_HEAD_TEACHER', 'HEAD_TEACHER', 'TEACHER', 'ACCOUNTANT', 'OFFICE_STAFF']}, on_delete=django.db.models.deletion.CASCADE, related_name='leave_requests', to=settings.AUTH_USER_MODEL)),
                ('reviewed_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='reviewed_leaves', to=settings.AUTH_USER_MODEL)),
                ('organization', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='leave_requests', to='main.organization')),
            ],
            options={
                'db_table': 'leave_requests',
                'ordering': ['-created_at'],
                'indexes': [models.Index(fields=['organization', 'status'], name='leave_reque_organiz_39019e_idx'), models.Index(fields=['requested_by', 'from_date', 'to_date'], name='leave_reque_request_505172_idx')],
            },
        ),
        migrations.AddIndex(
            model_name='feetype',
            index=models.Index(fields=['organization', 'is_active'], name='fee_types_organiz_06d22d_idx'),
        ),
        migrations.AddIndex(
            model_name='feetype',
            index=models.Index(fields=['category'], name='fee_types_categor_8bd2fb_idx'),
        ),
        migrations.AddIndex(
            model_name='feetype',
            index=models.Index(fields=['charge_trigger'], name='fee_types_charge__e45ba3_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='feetype',
            unique_together={('organization', 'name')},
        ),
        migrations.AddIndex(
            model_name='feestructure',
            index=models.Index(fields=['organization', 'academic_year', 'is_active'], name='fee_structu_organiz_7cb3eb_idx'),
        ),
        migrations.AddIndex(
            model_name='feestructure',
            index=models.Index(fields=['branch', 'class_level'], name='fee_structu_branch__8a4cc1_idx'),
        ),
        migrations.AddIndex(
            model_name='feestructure',
            index=models.Index(fields=['effective_from', 'effective_to'], name='fee_structu_effecti_b15055_idx'),
        ),
        migrations.AddIndex(
            model_name='feestructure',
            index=models.Index(fields=['fee_type', 'is_active'], name='fee_structu_fee_typ_3775a0_idx'),
        ),
        migrations.AddIndex(
            model_name='emailnotification',
            index=models.Index(fields=['organization', 'status'], name='email_notif_organiz_f58d0a_idx'),
        ),
        migrations.AddIndex(
            model_name='emailnotification',
            index=models.Index(fields=['recipient_email'], name='email_notif_recipie_7e984a_idx'),
        ),
        migrations.AddIndex(
            model_name='emailnotification',
            index=models.Index(fields=['status', 'created_at'], name='email_notif_status_026b4d_idx'),
        ),
        migrations.AddIndex(
            model_name='documentupload',
            index=models.Index(fields=['organization', 'entity_type', 'entity_id'], name='document_up_organiz_27cf75_idx'),
        ),
        migrations.AddIndex(
            model_name='documentupload',
            index=models.Index(fields=['uploaded_by'], name='document_up_uploade_8b71b9_idx'),
        ),
        migrations.AddIndex(
            model_name='division',
            index=models.Index(fields=['organization', 'is_active'], name='divisions_organiz_33f46f_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='division',
            unique_together={('organization', 'name')},
        ),
        migrations.AddIndex(
            model_name='class',
            index=models.Index(fields=['organization', 'is_active'], name='classes_organiz_289d90_idx'),
        ),
        migrations.AddIndex(
            model_name='class',
            index=models.Index(fields=['display_order'], name='classes_display_64e519_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='class',
            unique_together={('organization', 'name')},
        ),
        migrations.AddIndex(
            model_name='branch',
            index=models.Index(fields=['organization', 'is_active'], name='branches_organiz_8da68f_idx'),
        ),
        migrations.AddIndex(
            model_name='branch',
            index=models.Index(fields=['code'], name='branches_code_95622b_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='branch',
            unique_together={('organization', 'code')},
        ),
        migrations.AddIndex(
            model_name='auditlog',
            index=models.Index(fields=['organization', 'entity_type', 'entity_id'], name='audit_logs_organiz_3308b3_idx'),
        ),
        migrations.AddIndex(
            model_name='auditlog',
            index=models.Index(fields=['user', 'timestamp'], name='audit_logs_user_id_88267f_idx'),
        ),
        migrations.AddIndex(
            model_name='auditlog',
            index=models.Index(fields=['action'], name='audit_logs_action_31f574_idx'),
        ),
        migrations.AddIndex(
            model_name='attendancecalendar',
            index=models.Index(fields=['organization', 'academic_year', 'branch'], name='attendance__organiz_89baba_idx'),
        ),
        migrations.AddIndex(
            model_name='attendancecalendar',
            index=models.Index(fields=['date', 'is_working_day'], name='attendance__date_863ada_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='attendancecalendar',
            unique_together={('organization', 'academic_year', 'branch', 'date')},
        ),
        migrations.AddIndex(
            model_name='academicyear',
            index=models.Index(fields=['organization', 'is_active'], name='academic_ye_organiz_7119f6_idx'),
        ),
        migrations.AddIndex(
            model_name='academicyear',
            index=models.Index(fields=['start_date', 'end_date'], name='academic_ye_start_d_7538a0_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='academicyear',
            unique_together={('organization', 'name')},
        ),
        migrations.AddIndex(
            model_name='user',
            index=models.Index(fields=['organization', 'user_type'], name='users_organiz_c8a8ed_idx'),
        ),
        migrations.AddIndex(
            model_name='user',
            index=models.Index(fields=['email'], name='users_email_4b85f2_idx'),
        ),
        migrations.AddIndex(
            model_name='user',
            index=models.Index(fields=['is_active'], name='users_is_acti_847b48_idx'),
        ),
        migrations.AddIndex(
            model_name='staffattendance',
            index=models.Index(fields=['organization', 'date'], name='staff_atten_organiz_5b4ef0_idx'),
        ),
        migrations.AddIndex(
            model_name='staffattendance',
            index=models.Index(fields=['staff', 'date'], name='staff_atten_staff_i_33509e_idx'),
        ),
        migrations.AddIndex(
            model_name='staffattendance',
            index=models.Index(fields=['status'], name='staff_atten_status_8e545d_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='staffattendance',
            unique_together={('staff', 'date')},
        ),
        migrations.AddIndex(
            model_name='staffprofile',
            index=models.Index(fields=['staff_number'], name='staff_profi_staff_n_d30276_idx'),
        ),
        migrations.AddIndex(
            model_name='staffprofile',
            index=models.Index(fields=['status'], name='staff_profi_status_d41d3e_idx'),
        ),
        migrations.AddIndex(
            model_name='staffprofile',
            index=models.Index(fields=['branch'], name='staff_profi_branch__3328d7_idx'),
        ),
        migrations.AddIndex(
            model_name='studentfeedue',
            index=models.Index(fields=['student', 'academic_year'], name='student_fee_student_46201e_idx'),
        ),
        migrations.AddIndex(
            model_name='studentfeedue',
            index=models.Index(fields=['due_amount'], name='student_fee_due_amo_e55645_idx'),
        ),
        migrations.AddIndex(
            model_name='studentfeedue',
            index=models.Index(fields=['due_date'], name='student_fee_due_dat_f68396_idx'),
        ),
        migrations.AddIndex(
            model_name='studentfeedue',
            index=models.Index(fields=['creation_source'], name='student_fee_creatio_0fd7f2_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='studentfeedue',
            unique_together={('student', 'academic_year', 'fee_type', 'month')},
        ),
        migrations.AddIndex(
            model_name='studentfeeconfiguration',
            index=models.Index(fields=['student', 'academic_year'], name='student_fee_student_71b18f_idx'),
        ),
        migrations.AddIndex(
            model_name='studentfeeconfiguration',
            index=models.Index(fields=['fee_type'], name='student_fee_fee_typ_1b0c10_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='studentfeeconfiguration',
            unique_together={('student', 'academic_year', 'fee_type')},
        ),
        migrations.AddIndex(
            model_name='studentenrollment',
            index=models.Index(fields=['student', 'academic_year'], name='student_enr_student_f82bf2_idx'),
        ),
        migrations.AddIndex(
            model_name='studentenrollment',
            index=models.Index(fields=['class_assigned', 'division_assigned', 'enrollment_status'], name='student_enr_class_a_55d058_idx'),
        ),
        migrations.AddIndex(
            model_name='studentenrollment',
            index=models.Index(fields=['enrollment_status'], name='student_enr_enrollm_4d0a7a_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='studentenrollment',
            unique_together={('student', 'academic_year')},
        ),
        migrations.AddIndex(
            model_name='studentattendance',
            index=models.Index(fields=['organization', 'date'], name='student_att_organiz_213f7d_idx'),
        ),
        migrations.AddIndex(
            model_name='studentattendance',
            index=models.Index(fields=['enrollment', 'date'], name='student_att_enrollm_9f03b9_idx'),
        ),
        migrations.AddIndex(
            model_name='studentattendance',
            index=models.Index(fields=['student', 'date'], name='student_att_student_dcc33b_idx'),
        ),
        migrations.AddIndex(
            model_name='studentattendance',
            index=models.Index(fields=['status'], name='student_att_status_ef9f4f_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='studentattendance',
            unique_together={('student', 'date')},
        ),
        migrations.AddIndex(
            model_name='studentacademichistory',
            index=models.Index(fields=['student', 'year'], name='student_aca_student_2bf59d_idx'),
        ),
        migrations.AddIndex(
            model_name='feecollection',
            index=models.Index(fields=['organization', 'status'], name='fee_collect_organiz_0dbdd4_idx'),
        ),
        migrations.AddIndex(
            model_name='feecollection',
            index=models.Index(fields=['student', 'academic_year'], name='fee_collect_student_6ca4a8_idx'),
        ),
        migrations.AddIndex(
            model_name='feecollection',
            index=models.Index(fields=['collection_date'], name='fee_collect_collect_b7f3cb_idx'),
        ),
        migrations.AddIndex(
            model_name='feecollection',
            index=models.Index(fields=['receipt_number'], name='fee_collect_receipt_48e769_idx'),
        ),
        migrations.AddIndex(
            model_name='feecollection',
            index=models.Index(fields=['status'], name='fee_collect_status_63484f_idx'),
        ),
        migrations.AddIndex(
            model_name='studentregistration',
            index=models.Index(fields=['organization', 'status'], name='student_reg_organiz_06abb7_idx'),
        ),
        migrations.AddIndex(
            model_name='studentregistration',
            index=models.Index(fields=['submission_date'], name='student_reg_submiss_32446b_idx'),
        ),
        migrations.AddIndex(
            model_name='studentregistration',
            index=models.Index(fields=['interested_branch'], name='student_reg_interes_d18ef8_idx'),
        ),
        migrations.AddIndex(
            model_name='studentprofile',
            index=models.Index(fields=['admission_number'], name='student_pro_admissi_3e761b_idx'),
        ),
        migrations.AddIndex(
            model_name='studentprofile',
            index=models.Index(fields=['status'], name='student_pro_status_44d5f8_idx'),
        ),
        migrations.AddIndex(
            model_name='studentprofile',
            index=models.Index(fields=['branch'], name='student_pro_branch__04ab76_idx'),
        ),
        migrations.AddIndex(
            model_name='systemsetting',
            index=models.Index(fields=['organization', 'category'], name='system_sett_organiz_574489_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='systemsetting',
            unique_together={('organization', 'key')},
        ),
        migrations.AddIndex(
            model_name='teacherassignment',
            index=models.Index(fields=['teacher', 'academic_year', 'is_active'], name='teacher_ass_teacher_01bd8f_idx'),
        ),
        migrations.AddIndex(
            model_name='teacherassignment',
            index=models.Index(fields=['branch', 'class_assigned', 'division_assigned'], name='teacher_ass_branch__454a11_idx'),
        ),
        migrations.AddIndex(
            model_name='teacherassignment',
            index=models.Index(fields=['is_active', 'end_date'], name='teacher_ass_is_acti_d3be14_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='teacherassignment',
            unique_together={('teacher', 'branch', 'academic_year', 'class_assigned', 'division_assigned')},
        ),
        migrations.AddIndex(
            model_name='useraddress',
            index=models.Index(fields=['user', 'address_type'], name='user_addres_user_id_8ff364_idx'),
        ),
        migrations.AddIndex(
            model_name='userprofile',
            index=models.Index(fields=['full_name'], name='user_profil_full_na_956a9a_idx'),
        ),
        migrations.AddIndex(
            model_name='userprofile',
            index=models.Index(fields=['mobile'], name='user_profil_mobile_35b1ef_idx'),
        ),
        migrations.AddIndex(
            model_name='userprofile',
            index=models.Index(fields=['id_card_number'], name='user_profil_id_card_5095d9_idx'),
        ),
    ]
